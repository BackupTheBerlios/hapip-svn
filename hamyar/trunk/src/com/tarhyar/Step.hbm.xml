<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping SYSTEM
                        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >


<hibernate-mapping>
    <class name="Step" table="STEP" discriminator-value="NA">
        <id name="id" column = "STEP_ID" type="long" >
            <generator class="native"/>
        </id>
        <discriminator 
                column="TYPE"
                />
        <property name="name" column="STEP_NAME"/>
        <property name="nickname" column="STEP_NICKNAME"/>
        <property name="startDate" type="timestamp" column="START_DATE" />
        <property name="endDate"   type="timestamp" column="END_DATE" />
        <property name="budget"/>
        <subclass name="Task" discriminator-value="TASK">
            <set name="resources" >
                <key column="RESOURCE_ID"/>
                <one-to-many class="Resource"/>
            </set>
        </subclass>
        <subclass name="project" discriminator-value="PROJECT">
            <many-to-one name="person" column="PERSON_ID" class="Person"/>
        </subclass>
    </class>
</hibernate-mapping>